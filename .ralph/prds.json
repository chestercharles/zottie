[
  {
    "name": "Clear search filter when dismissing search box",
    "description": "When users tap the dismiss button (the large X outside the search input) on the pantry search interface, the search box should both hide AND clear the active search filter. Currently there are two X buttons: a small X inside the text input that clears the search text, and a large X outside that dismisses the search box. The issue is that dismissing the search box leaves the filter active, so users see filtered results without the search box visible, which is confusing. The fix: when the dismiss button is tapped, clear the search term and remove the filter so all items are shown again.",
    "completed": true
  },
  {
    "name": "Swipe gesture to dismiss pantry search",
    "description": "Add an upward swipe gesture to dismiss the pantry search interface. Users are accustomed to dismissing modal interfaces with swipe gestures in iOS apps. When the user swipes up on the search box, it should dismiss (and follow the same behavior as tapping the dismiss X button - both hiding the search and clearing the filter).",
    "completed": true
  },
  {
    "name": "Fix edit item sheet handle position",
    "description": "On the edit item bottom sheet, the handle (drag indicator) is currently positioned below the 'Edit Item' title. This is inconsistent with the settings page, where the handle is correctly positioned above the page title. The edit item sheet should match this pattern with the handle above the title. This likely requires using a custom header similar to how the settings page is structured.",
    "completed": true
  },
  {
    "name": "Remove redundant status display on edit item page",
    "description": "The edit item page currently shows the item's status twice: once as a read-only display right below the item name, and again in the status picker below that (where the current status is highlighted). This is redundant. Remove the first status display so that only the status picker is shown, with the current status already highlighted within it.",
    "completed": true
  },
  {
    "name": "Move checked shopping list items to bottom",
    "description": "When users are actively shopping and check items off their shopping list, those checked items should automatically move to the bottom of the list. This mirrors the behavior of iOS Notes app checklists. The use case is that while shopping in-store, users check items as they put them in their cart, but don't immediately mark them as purchased. Moving checked items to the bottom keeps the unchecked (still-needed) items at the top where they're most visible and actionable. Checked items remain visible at the bottom of the list in their checked state until the user explicitly marks them as purchased (which is a separate action).",
    "completed": true
  },
  {
    "name": "Intelligent pluralization for voice commands",
    "description": "When users add items via voice commands, the backend command parser should be resilient to imperfect voice-to-text input by intelligently pluralizing common grocery items. Voice-to-text happens on-device and may not perfectly capture what the user said (e.g., missing the 's' at the end of words). The parser should recognize that people typically buy 'eggs' not 'egg', 'tomatoes' not 'tomato', 'grapes' not 'grape', etc. When processing voice commands (not typed commands), if the parsed item name is a common grocery item that's typically purchased in plural form, the parser should automatically adjust it to the plural form before adding it to the user's list. This makes the voice command experience more natural and robust against environmental factors beyond our control.",
    "completed": false
  },
  {
    "name": "(Assistant Epic) Add Assistant tab with voice button and canned prompts",
    "description": "Add a new 'Assistant' tab to the app alongside existing tabs (does NOT replace the Commands tab). When opened, the tab shows a prominent voice input button at the top, followed by 3-4 canned prompt buttons for common actions like 'Update pantry items', 'Help me plan meals', and 'Add to shopping list'. Nothing needs to be functional yet - the voice button and prompt buttons are just UI placeholders. This PRD is only about getting the tab in place with the visual elements.",
    "completed": false
  },
  {
    "name": "(Assistant Epic) Enable voice input on Assistant tab",
    "description": "Make the voice button on the Assistant tab functional. User can tap the voice button, speak, and see their transcribed text appear on screen. This PRD is just about capturing and displaying voice input - no LLM response yet.",
    "completed": false
  },
  {
    "name": "(Assistant Epic) Connect Assistant to streaming LLM backend",
    "description": "Send the user's voice input (or canned prompt) to an LLM backend and display the streaming response. Responses should appear word-by-word as they're generated. The LLM should have context of the user's pantry and shopping list data so it can answer questions about their groceries. This is read-only - the assistant can answer questions but cannot take actions yet.",
    "completed": false
  },
  {
    "name": "(Assistant Epic) Enable canned prompt buttons on Assistant tab",
    "description": "Make the canned prompt buttons functional. When user taps a button like 'Update pantry items' or 'Help me plan meals', it sends that prompt to the LLM and starts a guided conversation focused on that task.",
    "completed": false
  },
  {
    "name": "(Assistant Epic) Add human-in-the-loop tool calling to Assistant",
    "description": "Allow the Assistant to propose actions like adding items, marking things out of stock, or updating the shopping list. When the assistant wants to take an action, it shows the user what it plans to do and asks for confirmation before executing. User can approve or reject the proposed actions.",
    "completed": false
  },
  {
    "name": "(Assistant Epic) Add text input option to Assistant tab",
    "description": "Add a secondary text input field to the Assistant tab for when voice isn't convenient. Voice remains the primary interaction method, but users can also type their requests.",
    "completed": false
  },
  {
    "name": "(Assistant Epic) Add conversation persistence to Assistant tab",
    "description": "Save conversation history so users can return to previous conversations. Conversations should automatically clear after being inactive for a day.",
    "completed": false
  },
  {
    "name": "Move Mark as Purchased action to header",
    "description": "The 'Mark as Purchased' button currently appears at the bottom of the shopping list as soon as any item is checked, and it's too prominent and in-the-way while actively shopping. Move this action to the header/navigation area so it's accessible but doesn't obstruct scrolling through the list.",
    "completed": true
  },
  {
    "name": "Add choice when removing item from shopping list",
    "description": "When a user swipes to remove an item from the shopping list, show two options: 'Already have it' and 'Don't want to buy it'. If they choose 'Already have it', the item is marked as in-stock in the pantry. If they choose 'Don't want to buy it', the item is removed from the shopping list without changing its pantry status - it goes into a dormant state so it won't keep reappearing on the shopping list. This addresses the case where someone buys salmon occasionally but doesn't want it automatically added to their shopping list every time they run out.",
    "completed": false
  },
  {
    "name": "Pulsing loading state for status change buttons",
    "description": "When the user changes an item's status on the edit item screen, the current behavior replaces all status buttons with a loader, causing a jarring flash. Instead, keep all buttons visible and show a subtle pulsing/breathing animation on the selected button until the API confirms the change. This provides feedback that the action is in progress without hiding the interface or causing visual disruption.",
    "completed": false
  },
  {
    "name": "Fix item name alignment on edit item screen",
    "description": "On the edit item screen, the item name at the top is misaligned - it sits too far to the left compared to the other sections below it (details, change status). The item name should align horizontally with the content in the sections below it for visual consistency.",
    "completed": true
  },
  {
    "name": "Simplify details section on edit item screen",
    "description": "The details section on the edit item screen currently shows redundant information: the item name (already displayed prominently at the top) and the status (already shown in the status picker above). Remove the item name and status from the details section, keeping only the useful information like last purchased date.",
    "completed": false
  },
  {
    "name": "Remove Edit Item header title and fix Settings header spacing",
    "description": "Two header adjustments for bottom sheet modals: (1) On the edit item screen, remove the 'Edit Item' title entirely - it's redundant since the item name is already visible and serves as the contextual header. (2) On the settings screen, keep the 'Settings' title but add more vertical space between the drag handle at the top of the modal and the 'Settings' text below it.",
    "completed": false
  },
  {
    "name": "Add confirmation before marking items as purchased",
    "description": "When the user taps the checkout button in the shopping list header, the app currently marks all checked items as purchased immediately. This is risky - an accidental tap can mark items as purchased before the user is ready. Add a confirmation step that asks the user to confirm before completing the action. The implementer should research iOS Human Interface Guidelines to determine the appropriate confirmation pattern (alert vs action sheet vs other) for this type of important action.",
    "completed": true
  }
]
